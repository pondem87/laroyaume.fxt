$(document).ready(function() {

  ////FORM VALIDATION
  //validate registration form
  $('#registration-form').validate({
      rules: {
          fullname: {
              required: true,
              minlength: 3
          },
          phone: {
              required: true,
              minlength: 5
          },
          email: {
              required: true,
              email: true
          },
          password: {
              required: true,
              minlength: 8
          },
          password2: {
            required: true,
            equalTo: "#password"
          }
      },
      messages: {
          fullname: {
              required: "Please provide a name.",
              minlength: "Name should be at least 3 characters."
          },
          phone: {
              required: "Please Provide a number.",
              minlength: "Number must be at least 5 characters"
          },
          email: {
              required: "Email required for login and password recovery"
          },
          password: {
              required: "password required",
              minlength: "Must be more than 8 characters"
          },
          password2: {
              required: "Confirmation of password required",
              minlength: "Must be more than 8 characters",
              equalTo: "Must match first password"
          }
      },
      submitHandler: function(form) {
        register(form);
      }
  });

  ////AJAX
  //register
  var register = function (form) {

    var form_data = form.serialize();

    $.ajax({
      type: 'POST',
      url: '/register',
      data: form_data,
      processData: false,
      success: function(data) {
        alert(data);
        $('#registration-form')[0].reset();
      }
    });
  };

  $('#subscribe-form').on('submit', function (event) {
    event.preventDefault();

    var form_data = $('#subscribe-form').serialize();

    $.ajax({
      type: 'POST',
      url: '/subscribe',
      data: form_data,
      processData: false,
      success: function(data) {
        alert(data);
        $('#subscribe-form')[0].reset();
      }
    });
  });

  $('#contact-form').on('submit', function(event) {
    event.preventDefault();

    var form_data = $('#contact-form').serialize();

    $('#contact-btn').css('visibility', 'hidden');

    $.ajax({
      type: 'POST',
      url: '/message',
      data: form_data,
      processData: false,
      success: function(data) {
        alert(data);
        $('#contact-form')[0].reset();
        $('#contact-btn').css('visibility', 'visible');
      }
    });
  });
});
